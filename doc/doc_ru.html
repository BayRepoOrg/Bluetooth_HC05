<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml10-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Библиотека Bluetooth_HC05</title><meta http-equiv="Content-Type" content="text/html" charset="utf-8" /><style type="text/css">.keyword {
color: #00007f;
font-weight: bold;
}
.operator {
color: #301010;
}
.constant {
color: #663300;
}
.number {
color: #007f00;
}
.type {
color: #2b71fd;
font-weight: bold;
}
.method {
color: #555533;
font-weight: bold;
}
.enum-description {
border: 2px solid #aaaaaa;
padding: 0.5em;
}
.chinese-warning {
margin: 5px 5px;
border: 2px solid #ff4400;
}
</style></head><body><h1>Описание библиотеки Bluetooth_HC05</h1><p>Библиотека предназначена для работы с Bluetooth-модулем HC-05 и реализует
    все 36 функций, описанных в документации (datasheet) к модулю от компании Wavesen,
    в виде класса Bluetooth_HC05 и его методов.
    Почти все методы принимают в качестве последнего агрумента тайм-аут на чтение ответа
    от модуля (в миллисекундах). К класс Bluetooth_HC05 реализует интерфейс Print
    так что вы можете посылать данные, пользуясь методом print(),
    как в объект класса Serial. В качестве источника информации был использован
    китайский даташит с кучей ошибок и неясностей - такие места я буду обозначать
    специальным значком: <span class="chinese-warning">狗屁</span>. Если вы видите этот значок в описании - значит, я
    ничерта не понял из документации и объяснить не могу.</p><ol><li><a href="#constants">Константы</a></li><li><a href="#types">Типы</a></li></ol><h2><a name="constants">Константы</a></h2><p><span class="constant">HC05_DEFAULT_TIMEOUT</span><br />Тайм-аут по умолчанию для большинства команд.</p><p><span class="constant">HC05_INQUIRY_DEFAULT_TIMEOUT</span><br />Тайм-аут по умолчанию для опроса (inquiring) Bluetooth-устройств.</p><p><span class="constant">HC05_PAIRING_DEFAULT_TIMEOUT</span><br />Тайм-аут по умолчанию для образования пары (pairing) между устройствами.</p><p><span class="constant">HC05_PASSWORD_MAXLEN</span><br />Максимальная длина пароля (PIN-кода), которую позволяет задать модуль.</p><p><span class="constant">HC05_PASSWORD_BUFSIZE</span><br />Размер буфера, способного вместить самый длинный пароль.</p><p><span class="constant">HC05_NAME_MAXLEN</span><br />Максимальная длина имени устройства.</p><p><span class="constant">HC05_NAME_BUFSIZE</span><br />Размер буфера для имени устройства.</p><p><span class="constant">HC05_ADDRESS_MAXLEN</span><br />Максимальная длина строкового представления адреса Bluetooth-устройства.</p><p><span class="constant">HC05_ADDRESS_BUFSIZE</span><br />Размер буфера для строкового представления Bluetooth-адреса.</p><h2><a name="types">Типы</a></h2><p><span class="type">BluetoothAddress</span><br />Адрес Bluetooth-устройства, 6-байтовый массив</p><p><div class="enum-description"><span class="type">HC05_Mode</span><br />Режим работы модуля<blockquote><p><span class="constant">HC05_MODE_DATA</span><br />приём-передача данных</p><p><span class="constant">HC05_MODE_COMMAND</span><br />управление AT-командами</p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_Role</span><br />Роль Bluetooth-модуля<blockquote><p><span class="constant">HC05_ROLE_SLAVE</span><br />Пассивное подключение (к модулю можно подключаться)</p><p><span class="constant">HC05_ROLE_MASTER</span><br />Активное подключение (модуль сам подключается к устройствам)</p><p><span class="constant">HC05_ROLE_SLAVE_LOOP</span><br />Пассивное подключение с эхом: все принятые данные передаются обратно</p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_InquiryMode</span><br />Режим опроса устройств<blockquote><p><span class="constant">HC05_INQUIRY_STANDARD</span><br />Обычный (все устройства)</p><p><span class="constant">HC05_INQUIRY_RSSI</span><br />Только устройства с <a href="http://ru.wikipedia.org/wiki/Received_Signal_Strength_Indication">RSSI</a></p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_Parity</span><br />Использование <a href="http://ru.wikipedia.org/wiki/Бит_чётности">бита чётности</a><blockquote><p><span class="constant">HC05_NO_PARITY</span><br />Без бита чётности</p><p><span class="constant">HC05_PARITY_ODD</span><br />Нечётный</p><p><span class="constant">HC05_PARITY_EVEN</span><br />Чётный</p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_Connection</span><br />Режим соединения<blockquote><p><span class="constant">HC05_CONNECT_BOUND</span><br /><span>
Принимать соединение только от устройства
    с определённым адресом, задаваемым методом <span class="method">bind()</span></span></p><p><span class="constant">HC05_CONNECT_ANY</span><br />Принимать соединения от любых устройств</p><p><span class="constant">HC05_CONNECT_SLAVE_LOOP</span><br /><span>slave-loop?<span class="chinese-warning">狗屁</span></span></p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_Security</span><br />Настройки <a href="http://www.palowireless.com/bluearticles/cc1_security1.asp">безопасности</a><blockquote><p><span class="constant">HC05_SEC_OFF</span><br /><span>Выключено?<span class="chinese-warning">狗屁</span></span></p><p><span class="constant">HC05_SEC_NON_SECURE</span><br />Незащищённое соединение</p><p><span class="constant">HC05_SEC_SERVICE</span><br />Защита на сервисном уровне (service-level)</p><p><span class="constant">HC05_SEC_LINK</span><br />Защита на уровне соединения (link-level)</p><p><span class="constant">HC05_SEC_UNKNOWN</span><br /><span>Неизвестный режим?<span class="chinese-warning">狗屁</span></span></p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_Encryption</span><br />Настройки шифрования (см. статью по <a href="http://www.palowireless.com/bluearticles/cc1_security1.asp">безопасности</a>, раздел <b>Packet Encryption</b>)<blockquote><p><span class="constant">HC05_ENC_OFF</span><br />Без шифрования</p><p><span class="constant">HC05_ENC_PTP</span><br />Шифруется только трафик PTP (point-to-point)</p><p><span class="constant">HC05_ENC_PTP_BROADCAST</span><br />Шифруется весь трафик</p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_State</span><br />Состояние модуля<blockquote><p><span class="constant">HC05_INITIALIZED</span><br />Инициализирован</p><p><span class="constant">HC05_READY</span><br /><span>Готов. К чему?<span class="chinese-warning">狗屁</span></span></p><p><span class="constant">HC05_PAIRABLE</span><br />Готов к образованию пары</p><p><span class="constant">HC05_PAIRED</span><br />Образована пара</p><p><span class="constant">HC05_INQUIRING</span><br />Опрашивает устройства</p><p><span class="constant">HC05_CONNECTING</span><br />Соединяется</p><p><span class="constant">HC05_CONNECTED</span><br />Соединён</p><p><span class="constant">HC05_DISCONNECTED</span><br />Отсоединён</p><p><span class="constant">HC05_UNKNOWN</span><br /><span>Неизвестное состояние?<span class="chinese-warning">狗屁</span></span></p></blockquote></div></p><p><div class="enum-description"><span class="type">HC05_Result</span><br />Результат последней выполненной команды<blockquote><p><span class="constant">HC05_OK</span><br />Команда выполнена успешно</p><p><span class="constant">HC05_FAIL</span><br /><span>Ошибка выполнения, причина неизвестна<span class="chinese-warning">狗屁</span></span></p><p><span class="constant">HC05_ERR_TIMEOUT</span><br />Вышло время ожидания ответа от модуля</p><p><span class="constant">HC05_ERR_ARGUMENT</span><br />Методу переданы неверные аргументы</p><p><span class="constant">HC05_ERR_DISC_LINK_LOSS</span><br />Связь с устройсвом потеряна</p><p><span class="constant">HC05_ERR_DISC_NO_SLC</span><br /><span class="chinese-warning">狗屁</span></p><p><span class="constant">HC05_ERR_DISC_TIMEOUT</span><br /><span>Тайм-аут отсоединения?<span class="chinese-warning">狗屁</span></span></p><p><span class="constant">HC05_ERR_DISC_ERROR</span><br /><span>Ошибка отсоединения?<span class="chinese-warning">狗屁</span></span></p><p><span class="constant">HC05_ERR_AT_COMMAND</span><br />Ошибка синтаксиса AT-команды</p><p><span class="constant">HC05_ERR_DEFAULT_RESULT</span><br /><span>Результат по умолчанию?<span class="chinese-warning">狗屁</span></span></p><p><span class="constant">HC05_ERR_PSKEY_WRITE</span><br />Ошибка сохранения пароля</p><p><span class="constant">HC05_ERR_DEVICE_NAME_TOO_LONG</span><br />Слишком длиное имя устройства</p><p><span class="constant">HC05_ERR_NO_DEVICE_NAME</span><br />Имя устройства не указано</p><p><span class="constant">HC05_ERR_NAP_TOO_LONG</span><br />Часть адреса NAP слишком длинная</p><p><span class="constant">HC05_ERR_UAP_TOO_LONG</span><br />Часть адреса UAP слишком длинная</p><p><span class="constant">HC05_ERR_LAP_TOO_LONG</span><br />Часть адреса LAP слишком длинная</p><p><span class="constant">HC05_ERR_NO_PIO_MASK</span><br />Не указана маска портов</p><p><span class="constant">HC05_ERR_NO_PIO_NUMBER</span><br />Не указан номер порта</p><p><span class="constant">HC05_ERR_NO_DEVICE_TYPE</span><br />Не указан класс устройства</p><p><span class="constant">HC05_ERR_DEVICE_TYPE_TOO_LONG</span><br />Слишком длинное значение класса устройства</p><p><span class="constant">HC05_ERR_NO_IAC</span><br />Пустой код опроса IAC (Inquire Access Code)</p><p><span class="constant">HC05_ERR_IAC_TOO_LONG</span><br />Слишком длинный IAC</p><p><span class="constant">HC05_ERR_INVALID_IAC</span><br />Недопустимый IAC</p><p><span class="constant">HC05_ERR_NO_PASSWORD</span><br />Пароль пуст</p><p><span class="constant">HC05_ERR_PASSWORD_TOO_LONG</span><br />Слишком длинный пароль</p><p><span class="constant">HC05_ERR_INVALID_MODULE_ROLE</span><br />Неверная роль устройства</p><p><span class="constant">HC05_ERR_INVALID_BAUD_RATE</span><br />Недопустимая скорость передачи</p><p><span class="constant">HC05_ERR_INVALID_STOP_BITS</span><br />Недопустимая настройка стоп-битов</p><p><span class="constant">HC05_ERR_INVALID_PARITY_BITS</span><br />Недопустимая настройка бита чётности</p><p><span class="constant">HC05_ERR_DEVICE_NOT_IN_LIST</span><br />Устройство не в списке авторизованных</p><p><span class="constant">HC05_ERR_SPP_NOT_INITIALIZED</span><br />Профиль последовательного порта (SPP, Serial Port Profile) не инициализирован</p><p><span class="constant">HC05_ERR_SPP_REINIT</span><br />Повторная инициализация SPP</p><p><span class="constant">HC05_ERR_INVALID_INQUIRY_MODE</span><br />Недопустимый режим опроса</p><p><span class="constant">HC05_ERR_INQUIRY_TIMEOUT_TOO_LONG</span><br />Слишком большой тайм-аут опроса</p><p><span class="constant">HC05_ERR_NO_BLUETOOTH_ADDRESS</span><br />Не указан Bluetooth-адрес</p><p><span class="constant">HC05_ERR_SECURITY_MODE</span><br />Недопустимый режим безопасности</p><p><span class="constant">HC05_ERR_ENCRYPTION_MODE</span><br />Недопустимый режим шифрования</p></blockquote></div></p></body></html>
